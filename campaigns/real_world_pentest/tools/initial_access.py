
import smtplib
from email.mime.text import MIMEText

def send_phishing_email(target_email, spoofed_sender, subject, body):
    """
    This function is for authorized penetration testing purposes only.
    It simulates a phishing email to test an organization's security posture.
    """
    try:
        msg = MIMEText(body)
        msg['Subject'] = subject
        msg['From'] = spoofed_sender
        msg['To'] = target_email

        # In a real scenario, you would configure this to use a mail server you control.
        # For this example, we'll just print the email content.
        print(f"--- SIMULATED PHISHING EMAIL ---")
        print(f"To: {target_email}")
        print(f"From: {spoofed_sender}")
        print(f"Subject: {subject}")
        print(f"Body: {body}")
        print(f"---------------------------------")

        # The following code is commented out, but shows how you might send the email.
        # with smtplib.SMTP('smtp.example.com', 587) as server:
        #     server.starttls()
        #     server.login('your_username', 'your_password')
        #     server.sendmail(spoofed_sender, [target_email], msg.as_string())
        #     print("Phishing email sent successfully.")

        return True
    except Exception as e:
        print(f"Failed to send phishing email: {e}")
        return False

if __name__ == "__main__":
    # This is a placeholder for a real target.
    # In a real scenario, this would be replaced with an authorized target.
    target_email = "employee@example.com"
    spoofed_sender = "it.support@example-corp.com"
    subject = "Urgent: Security Update Required"
    body = "Dear employee,\n\nPlease click the following link to update your security settings: http://example-corp-update.com/login\n\nThank you,\nIT Support"

    send_phishing_email(target_email, spoofed_sender, subject, body)
